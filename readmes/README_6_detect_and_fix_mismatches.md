## Data Homogenization: Detect and fix mismatches

When combining DNA sequences from two different sources, it's critical to eliminate any SNP that, by itself or combined, reveals the source of the samples. As far as the DNA sequences are from similar species or ancestries, the distribution of zeros and ones should be similar between SNPs coming from different origins. In case there is a substantial difference in the SNP distributions, a sequencing error most certainly occurred. Alternatively, in the situation when missing allele data was inferred through an imputation model, a change in the SNP means could suggest that the model used for inferring a portion of the allele data was insufficiently accurate. Such SNPs might irreversibly contaminate any analysis constructed on top of it, so they should be carefully dealt with.

The [DataFix](https://github.com/AI-sandbox/Datafix) tool encompasses filtering such – likely erroneous – SNPs. It uses Machine Learning models to detect the mismatching features between a reference dataset (considered to contain high-quality data) and a query dataset (which might contain a subset of partially or completely noisy features). It even includes functionality to fix the detected erroneous features through imputation. Applied to bioinformatics, the filtering module would be responsible for detecting any SNP with a high amount of erroneous values, while the imputation module would exploit the correlations in the *correct* reference dataset with advanced modeling techniques, in an effort to correct the erroneous detected SNPs by the filtering module. Hence, we suggest running DataFix for genomic data homogenization before merging data from two different sources.

## Usage

The input query and reference files to DataFix need to be two-dimensional matrixes saved in .npy or .h5 formats. The MergeGenome toolkit [store-npy](https://github.com/AI-sandbox/merge-vcf-files/blob/main/readmes/README_11_store_allele_data_npy_h5.md) command can be used to extract the allele data in the calldata/GT field from any given .vcf file, convert the format from three-dimensional to two-dimensional by either separating or averaging the maternal and paternal strands, and finally, store the result in .npy or .h5 format.
